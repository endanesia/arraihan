# .htaccess for ROOT domain deployment
# Deploy to /public_html/ directly (not /public_html/dev/)

# Set index files
DirectoryIndex index.php index.html index.htm

# Enable mod_rewrite for clean URLs
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    
    # Remove .php extension - External redirects (301)
    RewriteCond %{THE_REQUEST} \s/+[^?\s]*?([^/.\s]+)\.php[\s?] [NC]
    RewriteCond %{REQUEST_URI} ^(.*)/([^/]+)\.php$ [NC]
    RewriteRule ^ %1/%2? [R=301,L]

    # Admin pretty URLs
    RewriteRule ^admin/login/?$ admin/login.php [L,QSA]
    RewriteRule ^admin/logout/?$ admin/logout.php [L,QSA]
    RewriteRule ^admin/dashboard/?$ admin/dashboard.php [L,QSA]
    
    # Internal rewrite from /file to /file.php
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME}.php -f
    RewriteRule ^([^./]+)/?$ $1.php [L,QSA]
</IfModule>

# Security and performance
Options -Indexes
AddDefaultCharset UTF-8

# Compression
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/css application/javascript
</IfModule>

# Basic MIME types
<IfModule mod_mime.c>
    AddType text/html .html .htm
    AddType text/css .css
    AddType application/javascript .js
    AddType image/png .png
    AddType image/jpeg .jpg .jpeg
    AddType image/gif .gif
</IfModule>

# Basic compression (if supported)
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/css application/javascript
</IfModule>